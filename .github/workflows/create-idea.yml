name: Create Idea

on:
  workflow_dispatch:
    inputs:
      title:
        description: 'Issue title'
        required: true
        type: string
      type:
        description: 'Issue type'
        required: true
        type: choice
        options:
          - feature
          - enhancement
          - bug
          - documentation
        default: feature
      description:
        description: 'Issue description (markdown supported)'
        required: true
        type: string
      labels:
        description: 'Additional labels (comma-separated)'
        required: false
        type: string

jobs:
  create-issue:
    name: Create issue on ralph-ideas
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - name: Create issue
        env:
          GH_TOKEN: ${{ secrets.RALPH_IDEAS_TOKEN }}
        run: |
          LABELS="${{ inputs.type }}"
          if [ -n "${{ inputs.labels }}" ]; then
            LABELS="$LABELS,${{ inputs.labels }}"
          fi

          gh issue create \
            --repo rubenmarcus/ralph-ideas \
            --title "${{ inputs.title }}" \
            --body "${{ inputs.description }}" \
            --label "$LABELS"
